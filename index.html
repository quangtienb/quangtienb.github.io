<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Há»‡ thá»‘ng Ä‘iá»u khiá»ƒn thÃ´ng giÃ³ cho nhÃ  kÃ­nh - NhÃ³m 20</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* ... ToÃ n bá»™ CSS cá»§a báº¡n giá»¯ nguyÃªn ... */
    </style>
</head>
<body>
    <header>
        <h1>ğŸŒ THÃ”NG TIN THá»œI TIáº¾T ğŸŒ</h1>
        <nav>
            <ul>
                <li><a href="gioithieu.html">ğŸŒ¤ï¸ <b>Giá»›i thiá»‡u</b></a></li>
                <li><a href="yeucau.html">ğŸŒ¤ï¸ <b>YÃªu cáº§u</b></a></li>
                <li><a href="muctieu.html">ğŸŒ¤ï¸ <b>Má»¥c tiÃªu</b></a></li>
                <li><a href="lienhe.html">ğŸŒ¤ï¸ <b>LiÃªn há»‡</b></a></li>
            </ul>
        </nav>
    </header>

    <section>
        <h2>ğŸŒˆ Chá»n Äá»‹a Äiá»ƒm vÃ  Xem Thá»i Tiáº¿t</h2>
        <div>
            <label for="city-input">ğŸŒˆ Nháº­p tÃªn thÃ nh phá»‘:</label>
            <input type="text" id="city-input" placeholder="VÃ­ dá»¥: Hanoi, Ho Chi Minh...">
            <button id="fetch-weather-btn">Láº¥y dá»¯ liá»‡u thá»i tiáº¿t</button>
        </div>
        <p id="status-message" style="text-align: center; color: red;"></p>
        <div id="weather-info" class="weather-info-container">
            <!-- Giá»¯ nguyÃªn cáº¥u trÃºc HTML -->
        </div>
    </section>

    <footer>
        <p>Â© 2024 NhÃ³m 20 - <a href="https://github.com/quangtienb" target="_blank">GitHub</a></p>
        <p><b>BÃ¹i Quang Tiáº¿n - 21138184</b></p>
        <p><b>Nguyá»…n Ngá»c TÃ¢n - 21138174</b></p>
        <p>Äá»“ Ã¡n IoT vÃ  á»¨ng dá»¥ng</p>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-database.js"></script>

    <script>
        // Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyDe0ckQHkCBHGWQARoCTvIo1T1WEUHXlvk",
            authDomain: "demothoitiet-995b8.firebaseapp.com",
            databaseURL: "https://demothoitiet-995b8-default-rtdb.firebaseio.com",
            projectId: "demothoitiet-995b8",
            storageBucket: "demothoitiet-995b8.appspot.com",
            messagingSenderId: "823683238153",
            appId: "1:823683238153:web:97d52dd7ef86e50c616bd8",
            measurementId: "G-2JRE01LWSE"
        };
        firebase.initializeApp(firebaseConfig);

        // Firebase: Láº¥y dá»¯ liá»‡u vÃ  cáº­p nháº­t UI
        const firebaseTempElement = document.getElementById('firebase-temp');
        const firebaseHumidityElement = document.getElementById('firebase-humidity');
        firebase.database().ref('DHT11/Temperature').on('value', function(snapshot) {
            const temp = snapshot.val();
            firebaseTempElement.innerText = temp ? `${temp} Â°C` : "KhÃ´ng cÃ³ dá»¯ liá»‡u";
        });
        firebase.database().ref('DHT11/Humidity').on('value', function(snapshot) {
            const humidity = snapshot.val();
            firebaseHumidityElement.innerText = humidity ? `${humidity} %` : "KhÃ´ng cÃ³ dá»¯ liá»‡u";
        });

        // OpenWeather API: Láº¥y dá»¯ liá»‡u thá»i tiáº¿t
        const apiKey = 'c05417eac917208d896aa3f9cff02ac9';
        document.getElementById('fetch-weather-btn').addEventListener('click', function() {
            const city = document.getElementById('city-input').value.trim();
            const statusMessage = document.getElementById('status-message');
            if (city) {
                const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=vi`;
                statusMessage.innerText = "Äang táº£i dá»¯ liá»‡u...";
                fetch(apiUrl)
                    .then(response => {
                        if (!response.ok) throw new Error('KhÃ´ng tÃ¬m tháº¥y thÃ nh phá»‘');
                        return response.json();
                    })
                    .then(data => {
                        statusMessage.innerText = "";
                        document.getElementById('temperature').innerText = `${data.main.temp}Â°C`;
                        document.getElementById('humidity').innerText = `${data.main.humidity}%`;
                        document.getElementById('wind-speed').innerText = `${data.wind.speed} m/s`;
                        const rainfall = data.rain ? (data.rain['1h'] || 0) : 0;
                        document.getElementById('rainfall').innerText = `${rainfall} mm`;
                        document.getElementById('cloud-cover').innerText = `${data.clouds.all}%`;
                    })
                    .catch(error => {
                        statusMessage.innerText = error.message;
                    });
            } else {
                statusMessage.innerText = "Vui lÃ²ng nháº­p tÃªn thÃ nh phá»‘!";
            }
        });

        // Hiá»ƒn thá»‹ thá»i gian thá»±c
        function updateTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            document.getElementById('current-time').innerText = `${hours}:${minutes}:${seconds}`;
        }
        setInterval(updateTime, 1000);
    </script>
</body>
</html>
