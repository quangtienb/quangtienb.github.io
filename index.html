<!DOCTYPE html>
<html lang="vi">
<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Thành Phố Thông Minh IoT</title>
     <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <script src="https://kit.fontawesome.com/a46b7b6629.js" crossorigin="anonymous"></script>

     <style>
          /* Body và layout chung */
          body, html {
               height: 100%;
               margin: 0;
               font-family: 'Orbitron', sans-serif;
               background-image: url(image/PIC3.jpg);
               background-position: center;
               background-size: cover;
               background-repeat: no-repeat;
          }

          /* Phần tiêu đề */
          .titleContainer {
               display: flex;
               justify-content: space-between;
               align-items: center;
               padding: 20px;
               background-color: rgba(0, 0, 0, 0.6);
               color: white;
          }

          .logo img {
               width: 50px;
               height: 50px;
          }

          .title {
               font-size: 2.5em;
               font-weight: 700;
               letter-spacing: 2px;
               color: #fff;
          }

          /* Phần Tab */
          .tabContainer {
               padding: 20px;
               background-color: rgba(0, 0, 0, 0.5);
               border-radius: 10px;
               margin: 20px auto;
               width: 80%;
          }

          .buttonContainer button {
               background-color: #3498db;
               color: white;
               font-size: 1.2em;
               border: none;
               padding: 10px 20px;
               cursor: pointer;
               border-radius: 5px;
               transition: background-color 0.3s;
          }

          .buttonContainer button:hover {
               background-color: #2980b9;
          }

          .tabPanelContainer {
               margin-top: 20px;
               display: flex;
               justify-content: space-around;
               align-items: center;
          }

          .tabTemp, .tabWet {
               text-align: center;
               color: white;
               background-color: rgba(0, 0, 0, 0.7);
               padding: 15px;
               border-radius: 10px;
               width: 200px;
          }

          .tabTemp h1, .tabWet h1 {
               margin: 10px 0;
               font-size: 1.5em;
          }

          .tabTemp h2, .tabWet h2 {
               font-size: 2.5em;
               font-weight: bold;
               color: #e74c3c;
          }

          /* Footer */
          .footer {
               text-align: center;
               padding: 20px;
               background-color: rgba(0, 0, 0, 0.6);
               color: white;
               position: relative;
               width: 100%;
               margin-top: 30px;
          }

          .footer label {
               font-size: 1em;
               margin: 5px;
          }

          /* Phần Thời Tiết */
          .weatherContainer {
               text-align: center;
               color: white;
               margin-top: 30px;
          }

          .weatherContainer input {
               padding: 10px;
               font-size: 1.2em;
               border-radius: 5px;
               border: 1px solid #3498db;
               margin-right: 10px;
          }

          .weatherContainer button {
               padding: 10px 20px;
               font-size: 1.2em;
               background-color: #3498db;
               color: white;
               border: none;
               border-radius: 5px;
               cursor: pointer;
               transition: background-color 0.3s;
          }

          .weatherContainer button:hover {
               background-color: #2980b9;
          }

          .weatherInfo {
               margin-top: 20px;
               font-size: 1.5em;
               font-weight: bold;
          }

          .weatherItem {
               margin: 10px 0;
               background-color: rgba(0, 0, 0, 0.7);
               padding: 15px;
               border-radius: 10px;
               width: 200px;
               display: inline-block;
               text-align: center;
          }

          .weatherItem h3 {
               font-size: 1.2em;
               margin-bottom: 10px;
          }

          .weatherItem p {
               font-size: 1.5em;
               font-weight: bold;
               color: #e74c3c;
          }

     </style>
</head>
<body>

     <div class="titleContainer">
          <div class="logo">
               <img src="image/logo.png" alt="Logo">
          </div>
          <div class="title">THÔNG TIN THỜI TIẾT THÔNG MINH</div>    
     </div>  

     <div class="tabContainer">
          <div class="buttonContainer">
               <button onclick="showPanel(0)"><i class="far fa-builtiết">
    <button onclick="getWeatherData()">Lấy dữ liệu</button>

    <div class="weatherInfo">
        <div class="weatherItem">
            <h3 id="cityName">Thành phố:...</h3>
        </div>
        <div class="weatherItem">
            <h3>Nhiệt Độ:</h3>
            <p id="temperature">...</p>
        </div>
        <div class="weatherItem">
            <h3>Độ Ẩm:</h3>
            <p id="humidity">...</p>
        </div>
        <div class="weatherItem">
            <h3>Tốc Độ Gió:</h3>
            <p id="windSpeed">...</p>
        </div>
        <div class="weatherItem">
            <h3>Lượng Mưa:</h3>
            <p id="rain">Đang tải...</p>
        </div>
        <div class="weatherItem">
            <h3>Thời gian:</h3>
            <p id="time">...</p>
        </div>
    </div>
</div>

     </div>

     <div class="footer">
          <label>Bùi Quang Tiến - 21138184</label><br>
          <label>Nguyễn Ngọc Tân - 21138174</label><br>
          <label>Trường Đại học Nông Lâm TP Hồ Chí Minh</label><br>
     </div>

<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-database.js"></script>

<script>
// Cấu hình Firebase
var firebaseConfig = {
    apiKey: "AIzaSyDe0ckQHkCBHGWQARoCTvIo1T1WEUHXlvk", 
    authDomain: "demothoitiet-995b8.firebaseapp.com", 
    databaseURL: "https://demothoitiet-995b8-default-rtdb.firebaseio.com", 
    projectId: "demothoitiet-995b8", 
    storageBucket: "demothoitiet-995b8.appspot.com", 
    messagingSenderId: "823683238153", 
    appId: "1:823683238153:web:97d52dd7ef86e50c616bd8", 
    measurementId: "G-2JRE01LWSE"
};

// Khởi tạo Firebase
firebase.initializeApp(firebaseConfig);

// Lấy tham chiếu đến các phần tử
var temp = document.getElementById('temp');
var wet = document.getElementById('wet');

// Tham chiếu Firebase
var tempRef = firebase.database().ref().child('DHT11/Temperature');
var wetRef = firebase.database().ref().child('DHT11/Humidity');

// Lấy dữ liệu từ Firebase
tempRef.on('value', function(snapshot) {
    temp.innerHTML = snapshot.val() + '°C';
});

wetRef.on('value', function(snapshot) {
    wet.innerHTML = snapshot.val() + '%';
});

// Lấy dữ liệu thời tiết từ OpenWeatherMap API
function getWeatherData() {
    var city = document.getElementById('cityInput').value;
    var apiKey = 'c05417eac917208d896aa3f9cff02ac9';  // Thay thế bằng API key của bạn

    if (city) {
        var apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                document.getElementById('cityName').innerText = `Thời tiết tại ${data.name}`;
                document.getElementById('temperature').innerText = `${data.main.temp}°C`;
                document.getElementById('humidity').innerText = `${data.main.humidity}%`;
                document.getElementById('windSpeed').innerText = `${data.wind.speed} m/s`;
                document.getElementById('rain').innerText = data.rain ? `${data.rain['1h']} mm` : 'Không mưa';
                document.getElementById('time').innerText = `Thời gian: ${new Date().toLocaleTimeString()}`;
            })
            .catch(error => {
                alert('Lỗi khi lấy dữ liệu thời tiết!');
            });
    } else {
        alert('Vui lòng nhập tên thành phố!');
    }
}
</script>
</body>
</html>
