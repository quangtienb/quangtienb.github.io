<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá th·ªëng ƒëi·ªÅu khi·ªÉn th√¥ng gi√≥ cho nh√† k√≠nh - Nh√≥m 20</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* To√†n b·ªô ph·∫ßn style gi·ªØ nguy√™n */
        body {
            font-family: Arial, sans-serif;
        }

        header {
            background-color: #333;
            color: white;
            padding: 10px;
            text-align: center;
        }

        .led-banner {
            text-align: center;
            margin: 20px;
        }

        .controls {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .controls div {
            margin: 10px;
        }

        .weather-info-container {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .weather-info {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            width: 150px;
        }

        .weather-info i {
            font-size: 30px;
        }

        footer {
            text-align: center;
            padding: 10px;
            background-color: #333;
            color: white;
        }

        #result {
            font-size: 20px;
            font-weight: bold;
            color: green;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <header>
        <h1>H·ªá th·ªëng ƒëi·ªÅu khi·ªÉn th√¥ng gi√≥ cho nh√† k√≠nh</h1>
    </header>

    <div class="led-banner">
        <span id="led-text">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi trang web H·ªá th·ªëng ƒëi·ªÅu khi·ªÉn th√¥ng gi√≥ cho nh√† k√≠nh c·ªßa ch√∫ng t√¥i! üåû</span>
    </div>

    <div class="controls">
        <div>
            <label for="speed-control">T·ªëc ƒë·ªô ch·∫°y ch·ªØ (1-20):</label>
            <input type="range" id="speed-control" min="1" max="20" value="12">
        </div>
        <div>
            <label for="color-control">Ch·ªçn m√†u n·ªÅn LED:</label>
            <select id="color-control">
                <option value="black">‚ö´ƒêen</option>
                <option value="white">‚ö™Tr·∫Øng</option>
            </select>
        </div>
    </div>

    <section>
        <h2>üåà Ch·ªçn ƒê·ªãa ƒêi·ªÉm v√† Xem Th·ªùi Ti·∫øt</h2>
        <div>
            <label for="city-input">üåà Nh·∫≠p t√™n th√†nh ph·ªë:</label>
            <input type="text" id="city-input" placeholder="V√≠ d·ª•: Hanoi, Ho Chi Minh...">
            <button id="fetch-weather-btn">L·∫•y d·ªØ li·ªáu th·ªùi ti·∫øt</button>
        </div>
        <div id="weather-info" class="weather-info-container">
            <div class="weather-info">
                <i class="fas fa-temperature-high"></i>
                <h3>Nhi·ªát ƒë·ªô</h3>
                <p id="temperature">-- ¬∞C</p>
            </div>
            <div class="weather-info">
                <i class="fas fa-cloud"></i>
                <h3>ƒê·ªô ·∫©m</h3>
                <p id="humidity">-- %</p>
            </div>
            <div class="weather-info">
                <i class="fas fa-wind"></i>
                <h3>T·ªëc ƒë·ªô gi√≥</h3>
                <p id="wind-speed">-- m/s</p>
            </div>
            <div class="weather-info">
                <i class="fas fa-cloud-rain"></i>
                <h3>L∆∞·ª£ng m∆∞a</h3>
                <p id="rainfall">-- mm</p>
            </div>
            <div class="weather-info">
                <i class="fas fa-sun"></i>
                <h3>Che ph·ªß m√¢y</h3>
                <p id="cloud-cover">-- %</p>
            </div>
            <div class="weather-info">
                <h3>Th·ªùi gian</h3>
                <p id="current-time">--</p>
            </div>
        </div>
    </section>

    <section>
        <h1>So s√°nh nhi·ªát ƒë·ªô</h1>
        <button onclick="compareTemperatures()">So s√°nh</button>
        <div id="result"></div>
    </section>

    <footer>
        <p>Nh√≥m 20 - H·ªá th·ªëng ƒëi·ªÅu khi·ªÉn th√¥ng gi√≥ cho nh√† k√≠nh</p>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-database.js"></script>

    <script>
        // Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyDe0ckQHkCBHGWQARoCTvIo1T1WEUHXlvk",
            authDomain: "demothoitiet-995b8.firebaseapp.com",
            databaseURL: "https://demothoitiet-995b8-default-rtdb.firebaseio.com",
            projectId: "demothoitiet-995b8",
            storageBucket: "demothoitiet-995b8.appspot.com",
            messagingSenderId: "823683238153",
            appId: "1:823683238153:web:97d52dd7ef86e50c616bd8",
            measurementId: "G-2JRE01LWSE"
        };
        firebase.initializeApp(firebaseConfig);

        var firebaseTempElement = document.getElementById('firebase-temp');
        var firebaseHumidityElement = document.getElementById('firebase-humidity');

        firebase.database().ref('DHT11/Temperature').on('value', function(snapshot) {
            firebaseTempElement.innerText = snapshot.val() + " ¬∞C";
        });

        firebase.database().ref('DHT11/Humidity').on('value', function(snapshot) {
            firebaseHumidityElement.innerText = snapshot.val() + " %";
        });

        // OpenWeather API
        var apiKey = 'c05417eac917208d896aa3f9cff02ac9';

        document.getElementById('fetch-weather-btn').addEventListener('click', function() {
            var city = document.getElementById('city-input').value;
            if (city) {
                var apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=vi`;

                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('temperature').innerText = `${data.main.temp}¬∞C`;
                        document.getElementById('humidity').innerText = `${data.main.humidity}%`;
                        document.getElementById('wind-speed').innerText = `${data.wind.speed} m/s`;
                        document.getElementById('rainfall').innerText = `${data.rain?.['1h'] || 0} mm`;
                        document.getElementById('cloud-cover').innerText = `${data.clouds.all}%`;
                        document.getElementById('current-time').innerText = new Date().toLocaleTimeString();
                    })
                    .catch(error => console.error('L·ªói:', error));
            }
        });

        // So s√°nh nhi·ªát ƒë·ªô
        function compareTemperatures() {
            var firebaseTemp = parseFloat(firebaseTempElement.innerText);
            var apiTemp = parseFloat(document.getElementById('temperature').innerText);
            var weatherCondition = document.getElementById('rainfall').innerText;

            var resultMessage = '';

            if (firebaseTemp > apiTemp || parseFloat(weatherCondition) === 0) {
                resultMessage = 'M·ªü c·ª≠a th√¥ng gi√≥';
            } else {
                resultMessage = 'ƒê√≥ng c·ª≠a th√¥ng gi√≥';
            }

            document.getElementById('result').innerText = resultMessage;
        }
    </script>
</body>
</html>
