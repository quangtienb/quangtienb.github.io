<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bảng Thông Tin Thời Tiết</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background: #f4f4f4;
            color: #333;
        }

        header {
            background: #007bff;
            color: white;
            padding: 20px 0;
            text-align: center;
        }

        main {
            padding: 20px;
        }

        section {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
        }

        .led-container {
            background: black;
            color: lime;
            font-size: 18px;
            font-weight: bold;
            overflow: hidden;
            white-space: nowrap;
            padding: 10px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .led-text {
            display: inline-block;
            animation: scroll linear infinite;
        }

        @keyframes scroll {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(-100%);
            }
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-card {
            text-align: center;
            padding: 15px;
            background: #ffffff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        .info-card i {
            font-size: 40px;
            color: #007bff;
            margin-bottom: 10px;
        }

        .info-card h3 {
            margin: 10px 0;
            font-size: 18px;
        }

        .info-card p {
            margin: 0;
            font-size: 16px;
            font-weight: bold;
        }

        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
        }

        button:hover {
            background: #0056b3;
        }

        .slider-container {
            margin-top: 10px;
        }

        .slider-label {
            font-size: 14px;
            font-weight: bold;
        }

        .slider {
            width: 100%;
        }
    </style>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <h1>Bảng Thông Tin Thời Tiết</h1>
        <p id="current-date"></p>
    </header>

    <main>
        <!-- Thanh LED hiển thị -->
        <section id="led-section">
            <div class="led-container">
                <div id="led-text" class="led-text">Dữ liệu thời tiết sẽ hiển thị ở đây...</div>
            </div>
        </section>

        <!-- Thanh trượt để đổi màu và tốc độ -->
        <section>
            <div class="slider-container">
                <label class="slider-label" for="color-picker">Chọn màu cho thanh LED:</label>
                <input type="color" id="color-picker" value="#00ff00">
            </div>
            <div class="slider-container">
                <label class="slider-label" for="speed-slider">Chọn tốc độ chạy chữ (giây):</label>
                <input type="range" id="speed-slider" min="2" max="20" value="10">
                <span id="speed-value">10</span> giây
            </div>
        </section>

        <!-- Phần nhập thành phố -->
        <section id="tim-thanh-pho">
            <input type="text" id="nhap-thanh-pho" placeholder="Nhập tên thành phố">
            <button id="lay-thoi-tiet">Lấy Thông Tin Thời Tiết</button>
        </section>

        <!-- Ô hiển thị thông tin thời tiết -->
        <section id="thong-tin">
            <div class="info-grid">
                <div class="info-card">
                    <i class="fas fa-thermometer-half"></i>
                    <h3>Nhiệt Độ</h3>
                    <p id="nhiet-do">--°C</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-tint"></i>
                    <h3>Độ Ẩm</h3>
                    <p id="do-am">--%</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-wind"></i>
                    <h3>Tốc Độ Gió</h3>
                    <p id="toc-do-gio">-- m/s</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-cloud"></i>
                    <h3>Lượng Mây</h3>
                    <p id="luong-may">--%</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-cloud-rain"></i>
                    <h3>Dự Báo Mưa</h3>
                    <p id="du-bao-mua">-- mm</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Ứng Dụng Thời Tiết</p>
    </footer>

    <script>
        const apiKey = 'c05417eac917208d896aa3f9cff02ac9';

        // Hiển thị ngày và giờ thực tế
        function capNhatThoiGian() {
            const now = new Date();
            const ngay = now.toLocaleDateString('vi-VN');
            const gio = now.toLocaleTimeString('vi-VN');
            document.getElementById('current-date').textContent = `Ngày: ${ngay} - Giờ: ${gio}`;
        }
        setInterval(capNhatThoiGian, 1000); // Cập nhật mỗi giây

        async function layThoiTiet(thanhPho) {
            const apiURL = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(thanhPho)}&units=metric&appid=${apiKey}`;
            try {
                const phanHoi = await fetch(apiURL);
                if (!phanHoi.ok) throw new Error('Không tìm thấy thành phố.');
                return await phanHoi.json();
            } catch (loi) {
                alert(loi.message);
                return null;
            }
        }

        function capNhatThongTin(data) {
            const nhietDo = data.main.temp.toFixed(1);
            const doAm = data.main.humidity;
            const tocDoGio = data.wind.speed;
            const luongMay = data.clouds.all;
            const duBaoMua = data.rain ? data.rain['1h'] || 0 : 0;

            document.getElementById('nhiet-do').textContent = `${nhietDo}°C`;
            document.getElementById('do-am').textContent = `${doAm}%`;
            document.getElementById('toc-do-gio').textContent = `${tocDoGio} m/s`;
            document.getElementById('luong-may').textContent = `${luongMay}%`;
            document.getElementById('du-bao-mua').textContent = `${duBaoMua} mm`;

            const thoiGian = new Date().toLocaleTimeString('vi-VN');
            document.getElementById('led-text').textContent = `Thời gian: ${thoiGian} | Nhiệt độ: ${nhietDo}°C | Độ ẩm: ${doAm}% | Lượng mây: ${luongMay}% | Dự báo mưa: ${duBaoMua} mm`;
        }

        document.getElementById('lay-thoi-tiet').addEventListener('click', async () => {
            const thanhPho = document.getElementById('nhap-thanh-pho').value.trim();
            if (!thanhPho) return;

            const duLieuThoiTiet = await layThoiTiet(thanhPho);
            if (duLieuThoiTiet) {
                capNhatThongTin(duLieuThoiTiet);
            }
        });

        document.getElementById('color-picker').addEventListener('input', (event) => {
            document.querySelector('.led-container').style.color = event.target.value;
        });

        document.getElementById('speed-slider').addEventListener('input', (event) => {
            const speed = event.target.value;
            document.querySelector('.led-text').style.animationDuration = `${speed}s`;
            document.getElementById('speed-value').textContent = speed;
        });
    </script>
</body>
</html>
